<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Virtual Machines vs. Containers &middot; Dan Stroot</title>

  
  <link rel="stylesheet" href="http://dstroot.github.io/my-hugo-blog/css/poole.css">
  <link rel="stylesheet" href="http://dstroot.github.io/my-hugo-blog/css/syntax.css">
  <link rel="stylesheet" href="http://dstroot.github.io/my-hugo-blog/css/hyde.css">
  

  
  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://dstroot.github.io/touch-icon-144-precomposed.png">
  <link href="http://dstroot.github.io/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">

  

</head>

<body class=" ">

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
        <a href="http://dstroot.github.io/my-hugo-blog/"><img src="https://www.gravatar.com/avatar/b6e0ed5e10ea91f67808629f4ae109f2?s=200"
             alt="gravatar" title="Dan Stroot"></a>
      
      <a href="http://dstroot.github.io/my-hugo-blog/"><h1>Dan Stroot</h1></a>
      <p class="lead">I love building things. Made in California. Family man, technologist and Hacker News aficionado. Eternally curious.</p>
    </div>

    

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/dstroot"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      <a href="https://www.linkedin.com/in/danstroot"><i class="fa fa-linkedin-square fa-3x"></i></a>
      
      <a href="https://www.facebook.com/dan.stroot"><i class="fa fa-facebook-square fa-3x"></i></a>
      <a href="https://twitter.com/danstroot"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      
      </li>
    </ul>

    

    <p>Copyright &copy; 2016</p>
    
  </div>
</div>


  <div class="content container">
    <div class="post">
      <h1 class="post-title">Virtual Machines vs. Containers</h1>
      <span class="post-date">May 5, 2014 &middot; <i class="fa fa-clock-o" aria-hidden="true"></i> 3 minute read &middot; <a href="http://dstroot.github.io/my-hugo-blog/2014/05/05/virtual-machines-vs-containers#disqus_thread">Comments</a>
      
      <br/>
      
      </span>
      <p><img class="lazy img-rounded img-responsive" src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=" alt="Docker" data-src="/assets/img/docker.png" width="750"></p>

<p>Three driving forces of infrastructure efficiency in a large, distributed environment were:</p>

<ul>
<li>Data center consolidation <em>(KPI: How many DCs do you have?)</em></li>
<li>Host virtualization <em>(KPI: what percentage of your servers are virtual?)</em></li>
<li>&ldquo;Cloud&rdquo; in its various forms <em>(KPI: How many servers are you still running?)</em></li>
</ul>

<p>Assuming you have been aggresive you may not have any data centers left.  You may be buying services rather than servers, and/or all of your remaining machines might be virtualized and hosted in someone else&rsquo;s data center. Now what?<br />

##Where is the next level of infrastructure efficiency going to come from?</p>

<p>Personally I think the next wave of infrastructure efficiency will be driven by Linux container technology (LinuX Containers = LXC). The LXC container approach does <strong>not</strong> require a hypervisor - instead you run isolated &ldquo;containers&rdquo; on a Linux host.</p>

<p>LXC provides operating system-level virtualization, but instead of creating a full-fledged virtual machine LXC containers leverage cgroups (control groups) to completely isolate application&rsquo;s view of the operating environment, including process trees, network, user ids and mounted file systems. Cgroups are a Linux kernel feature to limit, account, and isolate resource usage (CPU, memory, disk I/O, etc.) of process groups.</p>

<p>This work was started by engineers at Google and in late 2007 it was merged into kernel version 2.6.24. LXC also relies on other kinds of namespace-isolation functionality, which have been developed and integrated into the mainline Linux kernel since then. It looks something like this:</p>

<p><img class="lazy img-rounded img-responsive" src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=" alt="LXC vs. Virtual Machines" data-src="/assets/img/dockervsvm.png" width="750"></p>

<p>##Is LXC Technology Really Better?</p>

<p>Here are some of the major benefits of Linux Containers from my perspective:</p>

<p>####Fast</p>

<ul>
<li>Runtime performance at near bare metal speeds (typically 97+ percent of bare metal).</li>
<li>Management operations (boot, stop, start, reboot, etc.) in seconds or milliseconds.</li>
</ul>

<p>####Agile</p>

<ul>
<li>VM-like agility &ndash; it&rsquo;s still &ldquo;virtualization&rdquo;.</li>
<li>With VMs we often touted our ability to ship a machine &ldquo;over the wire&rdquo; since a virtual machine is basically just a large file.  It also allows better business recovery scenarios where I can have a snapshot of my production machine(s) copied to a different datacenter at regular intervals. Guess what? LXC containers are an order of magnitude smaller!</li>
<li>Developers can essentially use the exact same containers as those deployed into production.</li>
</ul>

<p>####Lightweight</p>

<ul>
<li>Just enough Operating System (JeOS); include only what you need reducing image and container bloat.</li>
<li>Minimal per container penalty which equates to greater density and hence greater returns on existing assets &ndash; imagine packing 100s or 1000s of containers on a single host node!</li>
</ul>

<p>####Inexpensive</p>

<ul>
<li>Open source &ndash; free &ndash; lower TCO.</li>
<li>Supported with out-of-the-box modern Linux kernels.</li>
<li>LXC hosting likely to drive the next wave of cloud products.</li>
</ul>

<p>####Ecosystem</p>

<ul>
<li>Growing in popularity &ndash; just checkout the google trends for docker or LXC.</li>
<li>Vibrant community and numerous 3rd party applications (1000s of prebuilt images on docker index and 100s of open source apps on github or other public sources).</li>
</ul>

<p>####Benchmarks</p>

<ul>
<li>Average boot time: LXC 1.5x faster</li>
<li>Average reboot time: LXC 18.9x faster</li>
<li>LXC CPU growth 26x lower than VM (per machine)</li>
<li>LXC Memory group 3x lower than VM (per machine)</li>
<li>LXC images 3.2x smaller than VM</li>
</ul>

<p>##Summary</p>

<p>The next wave of server density is likely to be driven by LXC technology instead of traditional VM technology.  This technology may also increase further an organizations agility, developer productivity and even business continuity. However, LXC technology is not yet as mature or &ldquo;manageable&rdquo; as VM technology, but tools like Docker are developing quickly.</p>

<p><em>Sources:</em></p>

<ul>
<li><a href="http://bodenr.blogspot.com/2014/05/kvm-and-docker-lxc-benchmarking-with.html">KVM and Docker LXC Benchmarking with OpenStack</a></li>
</ul>
    </div>
    <div id="disqus_thread"></div>
  </div>

  
  <script type="text/javascript">
  var disqus_shortname = "danstroot";
  (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
  </script>
  

  
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
<script type="text/javascript">
     
    var disqus_shortname = 'danstroot'; 

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  



<script>
  document.body.onload = function() {
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700|Titillium+Web:200';
    document.head.appendChild(link);
  }
</script>


</body>
</html>
